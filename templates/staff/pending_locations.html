{% extends "staff/base.html" %}
{% block content %}
<h2 class="section-title">üìç Pending Location Requests</h2>

<h3>Product Posts</h3>
{% if post_requests %}
<table class="moderation-table">
  <thead>
    <tr>
      <th>Town Name</th>
      <th>Parent State</th>
      <th>Post</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for req in post_requests %}
    <tr>
      <td>{{ req.typed_town }}</td>
      <td>{{ req.parent_state.name }}</td>
      <td><a href="{{ req.post.get_absolute_url }}" target="_blank">Post #{{ req.post.id }}</a></td>
      <td>
        <form action="{% url 'staff:approve_location' req.pk %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button class="approve-btn">Approve</button>
        </form>
        <form action="{% url 'staff:reject_location' req.pk %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button class="reject-btn">Reject</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No pending product-post locations üéâ</p>
{% endif %}

<hr>

<h3>Seeker Posts</h3>
{% if seeker_requests %}
<table class="moderation-table">
  <thead>
    <tr>
      <th>Town Name</th>
      <th>Parent State</th>
      <th>Seeker Post</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for req in seeker_requests %}
    <tr>
      <td>{{ req.typed_town }}</td>
      <td>{{ req.parent_state.name }}</td>
      <td><a href="{{ req.post.get_absolute_url }}" target="_blank">Seeker Post #{{ req.post.id }}</a></td>
      <td>
        <form action="{% url 'staff:approve_location' req.pk %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button class="approve-btn">Approve</button>
        </form>
        <form action="{% url 'staff:reject_location' req.pk %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button class="reject-btn">Reject</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No pending seeker-post locations üéâ</p>
{% endif %}
{% endblock %}
