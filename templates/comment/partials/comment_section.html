<!-- ðŸ’¬ Reusable Comment Section -->
<div class="mt-6 border-t pt-4">
  <h3 class="text-xl font-semibold mb-3">ðŸ’¬ Comments</h3>

  {% if comments %}
    <ul class="space-y-4">
      {% for comment in comments %}
        {% include "comment/partials/comment_thread.html" with comment=comment target_object=target_object comment_form=comment_form %}
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-500">No comments yet. Be the first to speak up!</p>
  {% endif %}

  {% if user.is_authenticated %}
    <div class="mt-6 bg-white p-4 rounded shadow">
      <h5 class="font-semibold mb-2">Add a Comment</h5>
      <form method="post" action="{% url 'create_comment' app_label model_name target_object.id %}">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">Submit</button>
      </form>
    </div>
  {% else %}
    <p><a href="{% url 'login' %}" class="text-blue-600 underline">Log in</a> to post a comment.</p>
  {% endif %}
</div>
