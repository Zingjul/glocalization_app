{% extends "base.html" %}

{% block content %}
<h2 class="text-2xl font-bold text-green-700 mb-4">
    {% if post.category.name == 'Product' %}
        {{ post.product_name }}
    {% elif post.category.name == 'Service' %}
        {{ post.service_name }}
    {% elif post.category.name == 'Labor' %}
        {{ post.labor_title }}
    {% else %}
        Untitled Post
    {% endif %}
</h2>

<!-- Images -->
{% if post.images.all %}
    <div class="flex flex-wrap gap-4 mb-4">
        {% for image in post.images.all %}
            <img src="{{ image.image.url }}" alt="Post Image" class="w-36 h-36 object-cover rounded shadow">
        {% endfor %}
    </div>
{% endif %}

<!-- Post Info -->
<p><strong>Category:</strong> {{ post.category.name }}</p>
<p><strong>Description:</strong> {{ post.description }}</p>

{% if post.price %}
    <p><strong>Price:</strong> ${{ post.price }}</p>
{% endif %}

<p><strong>Contact:</strong> {{ post.author_phone_number }} | {{ post.author_email }}</p>


<!-- Timestamps -->
<p class="text-sm text-gray-500 mt-2">
    Created on: {{ post.created_at|date:"F j, Y, g:i a" }} <br>
    Last updated: {{ post.updated_at|date:"F j, Y, g:i a" }}
</p>

<!-- Edit/Delete Buttons -->
{% if user == post.author %}
    <div class="mt-4 flex gap-4">
        <form method="POST" action="{% url 'post_delete' post.pk %}">
            {% csrf_token %}
            <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
                Delete Post
            </button>
        </form>
    </div>
{% endif %}
<button type="submit" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
    {% if post.category.name == "Product" %}
        <a href="{% url 'post_edit_product' post.pk %}">Edit</a>
    {% elif post.category.name == "Service" %}
        <a href="{% url 'post_edit_service' post.pk %}">Edit</a>
    {% elif post.category.name == "Labor" %}
        <a href="{% url 'post_edit_labor' post.pk %}">Edit</a>
    {% endif %}
</button>
<a href="{% url 'post_home' %}" class="inline-block mt-6 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition">
    Back to Posts
</a>
{% endblock %}
