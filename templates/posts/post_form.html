{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>Create a Post</h2>

<form method="post" enctype="multipart/form-data" x-data="postFormHandler()" @change="handleCategoryChange">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <!-- Category Selection -->
    <div>
        {{ form.category.label_tag }}
        <select name="category" id="id_category" x-model="category">
            <option value="">Select Category</option>
            {% for choice in form.category.field.choices %}
                {% if choice.0 %}
                    <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                {% endif %}
            {% endfor %}
        </select>
    </div>

    <p>Chosen category: <span x-text="category"></span></p>

    <!-- Basic Fields -->
    <div>{{ form.product_name.label_tag }} {{ form.product_name }}</div>
    <div>{{ form.description.label_tag }} {{ form.description }}</div>
    <div>{{ form.author_phone_number.label_tag }} {{ form.author_phone_number }}</div>
    <div>{{ form.author_email.label_tag }} {{ form.author_email }}</div>

    <div>
      {{ form.availability_scope.label_tag }}
      {{ form.availability_scope }}
    </div>
    
    <!-- Location Fields -->
    <div>{{ form.use_default_location.label_tag }} {{ form.use_default_location }}</div>
    <div>{{ form.post_continent.label_tag }} {{ form.post_continent }}</div>
    <div>{{ form.post_continent_input.label_tag }} {{ form.post_continent_input }}</div>
    <div>{{ form.post_country.label_tag }} {{ form.post_country }}</div>
    <div>{{ form.post_country_input.label_tag }} {{ form.post_country_input }}</div>
    <div>{{ form.post_state.label_tag }} {{ form.post_state }}</div>
    <div>{{ form.post_state_input.label_tag }} {{ form.post_state_input }}</div>
    <div>{{ form.post_town.label_tag }} {{ form.post_town }}</div>
    <div>{{ form.post_town_input.label_tag }} {{ form.post_town_input }}</div>

    <!-- Images -->
    <!-- Images -->
    <label for="image1">Image 1:</label>
    <input type="file" name="image1"><br>

    <label for="image2">Image 2:</label>
    <input type="file" name="image2"><br>

    <label for="image3">Image 3:</label>
    <input type="file" name="image3"><br>

    <label for="image4">Image 4:</label>
    <input type="file" name="image4"><br>

    <label for="image5">Image 5:</label>
    <input type="file" name="image5"><br>

    <label for="image6">Image 6:</label>
    <input type="file" name="image6"><br>

    <!-- Product Fields -->
    <div x-show="category === 'Product'" x-cloak>
        <h4>Product Fields</h4>
        <div>{{ form.color.label_tag }} {{ form.color }}</div>
        <div>{{ form.brand.label_tag }} {{ form.brand }}</div>
        <div>{{ form.condition.label_tag }} {{ form.condition }}</div>
        <div>{{ form.model_version.label_tag }} {{ form.model_version }}</div>
        <div>{{ form.technical_specs.label_tag }} {{ form.technical_specs }}</div>
        <div>{{ form.warranty.label_tag }} {{ form.warranty }}</div>
    </div>

    <!-- Service Fields -->
    <div x-show="category === 'Service'" x-cloak>
        <h4>Service Fields</h4>
        <div>{{ form.service_details.label_tag }} {{ form.service_details }}</div>
        <div>{{ form.experience_qualifications.label_tag }} {{ form.experience_qualifications }}</div>
        <div>{{ form.availability.label_tag }} {{ form.availability }}</div>
        <div>{{ form.region_served.label_tag }} {{ form.region_served }}</div>
        <div>{{ form.service_duration.label_tag }} {{ form.service_duration }}</div>
        <div>{{ form.service_policies.label_tag }} {{ form.service_policies }}</div>
    </div>

    <!-- Labor Fields -->
    <div x-show="category === 'Labor'" x-cloak>
        <h4>Labor Fields</h4>
        <div>{{ form.labor_type.label_tag }} {{ form.labor_type }}</div>
        <div>{{ form.labor_skills.label_tag }} {{ form.labor_skills }}</div>
        <div>{{ form.labor_experience.label_tag }} {{ form.labor_experience }}</div>
        <div>{{ form.labor_availability.label_tag }} {{ form.labor_availability }}</div>
        <div>{{ form.labor_location.label_tag }} {{ form.labor_location }}</div>
        <div>{{ form.labor_references.label_tag }} {{ form.labor_references }}</div>
    </div>

    <button type="submit">Submit</button>
</form>

<script src="{% static 'js/post_form.js' %}"></script>
{% endblock %}
