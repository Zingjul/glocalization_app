{% extends "base.html" %}
{% load humanize %}
{% load static %}
{% load profile_tags %}
{% load post_filters %}
{% load time_filters %}
{% load follow_tags %}

{% block body_class %}platform-page post-detail-page{% endblock body_class %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'glocalization_app/css/02-platform-layout.css' %}">
<link rel="stylesheet" href="{% static 'glocalization_app/css/post-detail/post-detail.css' %}">
{% endblock extra_head %}

{% block site-header-content %}
<div class="feed-nav header">
    <span class="feed-nav-icon-container">
        <a href="{% url 'post_home' %}"
           class="nav-link js-back-link"
           title="Back"
           data-page="back">
            <span class="nav-link__icon">
                {% include 'icons/detail-page/back-botton.html' %}
            </span>
            <span class="nav-link__label">Back</span>
            <span class="nav-link__indicator"></span>
        </a>
    </span>
</div>
{% endblock site-header-content %}

{% block content %}
<main class="platform-feed">
    <div class="feed-content container-fluid">

      <div class="max-w-xl mx-auto">
        <h2 class="text-3xl font-bold text-center text-gray-800">
          {% if profile %}Edit Your Profile{% else %}Create Your Profile{% endif %}
        </h2>

        <form method="post" enctype="multipart/form-data" class="bg-white p-6 rounded-2xl shadow-md space-y-5" id="postForm">
          {% csrf_token %}
          <!-- {# ðŸ”¹ Include external template for top fields if needed #} -->
          {% include "person/includes/top_fields.html" %}

          <!-- {# ðŸ”¹ External include for additional location field logic (JS, UI) #} -->
          {% include "person/includes/location_fields.html" %}
          {% if form.errors %}
              <div class="alert alert-danger">
                  {{ form.errors }}
              </div>
          {% endif %}
          <!-- {# ðŸ”¹ Submit + Cancel buttons #} -->
          <div class="flex items-center justify-between mt-6">
            <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">
              Save Changes
            </button>

            {% if user == user.profile.user %}
              <a href="{% url 'person_detail' user.profile.pk %}" class="text-sm text-gray-600 hover:text-gray-800">
                Cancel
              </a>
            {% else %}
              <a href="{% url 'person_list' %}" class="text-sm text-gray-600 hover:text-gray-800">
                Cancel
              </a>
            {% endif %}
          </div>
        </form>
      </div>
  </div>
</main>
      <!-- ðŸ”¹ Import scripts -->
      {% include "person/includes/js_imports.html" %}
      {% endblock content %}
