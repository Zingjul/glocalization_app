{% load static %} 
{% load widget_tweaks %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}You - Buy, Sell, Seek and find{% endblock title %}</title>
    
    <!-- Preconnect to CDNs for faster loading -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    
    <!-- Bootstrap 5.3.5 (Keep for grid, forms, modals) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    
    <!-- Font Awesome 6.x (Latest) -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
     -->
    <!-- lineicons  -->
    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet">    
    
    <!-- HTMX (Keep for dynamic updates if needed) -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    <!-- Custom CSS Design System (Apple-inspired + X-refined - overrides Bootstrap) -->
    <link rel="stylesheet" href="{% static 'glocalization_app/css/00-bootstrap-overrides.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/01-variables.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/02-typography.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/03-layout.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/04-components.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/05-utilities.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/06-animations.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/overflow-handler.css' %}">
    
    <!-- Additional head content -->
    {% block extra_head %}{% endblock extra_head %}
    <link rel="stylesheet" href="{% static 'glocalization_app/css/07-responsive.css' %}">
    <link rel="stylesheet" href="{% static 'glocalization_app/css/08-mobile-override.css' %}">
</head>
<body>
    <!-- Skip to main content (Accessibility) -->
    <!-- <a href="#main-content" class="skip-link">Skip to main content</a> -->

    <!-- Sticky Header (Apple-inspired frosted glass) -->
    <header class="site-header" id="mainHeader">
        <div class="header-container">
            <!-- Logo -->
            <!-- <a href="/" class="site-logo"></a> -->
            <div class="function-key-toggle-notification" id="showSideBar" title="Toggle Notifications Sidebar Show">
                <span>
                    x
                </span>
            </div>
            <!-- Desktop Navigation -->
            <nav class="header-nav" aria-label="Main navigation">
                {% block site-header-content %}
                {% if user.is_authenticated %}
                    
                {% else %}
                    <a href="{% url 'signup' %}" class="nav-link">Sign Up</a>
                    <a href="{% url 'login' %}" class="nav-link">Login</a>
                {% endif %}
                {% endblock site-header-content %}
            </nav>
            
            <!-- User Actions -->
            {% if user.is_authenticated %}
            <div class="header-actions">
                <a href="{% url 'person_detail' user.pk %}" class="btn-profile" aria-label="View profile">
                    <i class="fa-regular fa-user"></i>
                </a>
                <a href="{% url 'logout' %}" class="btn-secondary-small"></a>
            </div>
            {% endif %}
        </div>
        
        <!-- Mobile Menu (Hidden by default) -->
        <div class="mobile-menu" id="mobileMenu">
            {% if user.is_authenticated %}
                <a href="/" class="mobile-menu-item">Home</a>
                <a href="{% url 'seekers:seeker_list' %}" class="mobile-menu-item">Seekers</a>
                <a href="{% url 'board:unified_board' %}" class="mobile-menu-item">Board</a>
                <a href="{% url 'notifications:notifications-page' %}" class="mobile-menu-item">Notifications</a>
                <a href="{% url 'person_detail' user.pk %}" class="mobile-menu-item">Profile</a>
                <a href="{% url 'subscription:plans' %}" class="mobile-menu-item">Upgrade</a>
                <a href="{% url 'logout' %}" class="mobile-menu-item">Logout</a>
                <a href="{% url 'delete_account' %}" class="mobile-menu-item mobile-menu-danger">Delete Account</a>
            {% else %}
                <a href="{% url 'signup' %}" class="mobile-menu-item">Sign Up</a>
                <a href="{% url 'login' %}" class="mobile-menu-item">Login</a>
            {% endif %}
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="main-content" class="main-container">
        <!-- Messages/Alerts (Django messages) -->
        {% block messages %}
            {% if messages %}
                <div class="messages-container">
                    {% for message in messages %}
                        <div class="toast toast-{{ message.tags }}" role="alert" aria-live="polite">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endblock messages %}
        
        <!-- Page Content -->
        {% block content %}{% endblock content %}
        <!-- adding some jump to top feature that refreshes the page in case new posts were added before user completely scrolled down the end of page -->
    </main>

    <!-- Mobile Bottom Navigation (Show only on mobile when authenticated) -->
    {% if user.is_authenticated %}
    <nav class="bottom-nav" aria-label="Mobile navigation">
        <a href="/" class="bottom-nav-item" aria-label="Home">
            <i class="fa-solid fa-house"></i>
            <!-- <span>Home</span> -->
        </a>
        <a href="{% url 'postfinder_search' %}" class="bottom-nav-item" aria-label="Search">
            <i class="fa-solid fa-magnifying-glass"></i>
            <!-- <span>Search</span> -->
        </a>
        <a href="{% url 'post_create' %}" class="bottom-nav-item bottom-nav-cta" aria-label="Post ad">
            <i class="fa-solid fa-plus"></i>
            <!-- <span>Post</span> -->
        </a>
        <a href="{% url 'person_detail' user.pk %}" class="bottom-nav-item" aria-label="Profile">
            <i class="fa-regular fa-user"></i>
            <!-- <span>Profile</span> -->
        </a>
    </nav>
    {% endif %}
  

    <!-- Additional scripts -->
    {% block extra_scripts %}{% endblock extra_scripts %}

    <!-- Custom UI JavaScript (NEW features only)
    <script src="{% static 'js/frontend/main.js' %}"></script>
    <script src="{% static 'js/frontend/search-engine.js' %}"></script>
    <script src="{% static 'js/frontend/responsive-handler.js' %}"></script>
    <script src="{% static 'js/frontend/performance.js' %}"></script>
    <script src="{% static 'js/frontend/forms.js' %}"></script>
    <script src="{% static 'js/frontend/interactions.js' %}"></script> -->

    <!-- Enhanced Frontend JavaScript (Load AFTER existing scripts) -->
    <script src="{% static 'js/01-frontend/main.js' %}"></script>
    <script src="{% static 'js/01-frontend/responsive-handler.js' %}"></script>
    <script src="{% static 'js/01-frontend/performance.js' %}"></script>
    <script src="{% static 'js/01-frontend/interactions.js' %}"></script>
    <!-- Add the new overflow handler -->
    <script src="{% static 'js/01-frontend/smart-overflow-handler.js' %}"></script>
    <script src="{% static 'js/01-frontend/text-length-handler.js' %}"></script>
    <script src="{% static 'js/01-frontend/sidebar-handler.js' %}"></script>

    <!-- Core JavaScript -->
    <!-- Bootstrap JS (Keep for modals, dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    
</body>

</html>